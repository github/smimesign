version: "{build}"
clone_folder: c:\gopath\src\github.com\github\smimesign
environment:
  GOPATH: c:\gopath

install:
  - set PATH=%PATH%;C:\msys64\mingw64\bin
  - go version
build_script:
  - set GOARCH=amd64
  - go build
  - mv smimesign.exe smimesign-x64.exe
  - set GOARCH=386
  - go build
  - mv smimesign.exe smimesign-x86.exe
test_script:
  - go test -v
artifacts:
  - path: smimesign-x64.exe

# build_script:
#   - bash --login -c 'GOOS=windows PATH="$PATH;C:\msys64\mingw64\bin" CC_FOR_TARGET=C:\msys64\mingw64\bin\gcc.exe GOARCH=amd64 go build'
#   - mv smimesign.exe smimesign-x64.exe
# 
#   - bash --login -c 'GOOS=windows PATH="$PATH;C:\MinGW\bin" CC_FOR_TARGET=C:\MinGW\bin\gcc.exe GOARCH=386 go build'
#   - mv smimesign.exe smimesign-x86.exe


# artifacts:
#   - path: smimesign-x64.exe
#   - path: smimesign-x86.exe
